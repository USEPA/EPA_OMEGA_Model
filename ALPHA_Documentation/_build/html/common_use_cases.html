
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>3. Common Use Cases &#8212; ALPHA Documentation 1.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Model Inputs" href="model_inputs.html" />
    <link rel="prev" title="2. Overview" href="overview.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model_inputs.html" title="4. Model Inputs"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="2. Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ALPHA Documentation 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="common-use-cases">
<h1>3. Common Use Cases<a class="headerlink" href="#common-use-cases" title="Permalink to this headline">¶</a></h1>
<div class="section" id="running-a-performance-neutral-batch">
<h2>3.1. Running a Performance Neutral Batch<a class="headerlink" href="#running-a-performance-neutral-batch" title="Permalink to this headline">¶</a></h2>
<p>There are several possible approaches to running a set of performance neutral simulations.  All methods share the same basic approach:</p>
<ol class="arabic simple">
<li><p>Define a performance baseline simulation</p></li>
<li><p>Run a set of alternative simulations, sweeping the engine size (or potentially other parameters) across a range</p></li>
<li><p>Examine the simulation results and pick out the runs that meet the baseline performance</p></li>
</ol>
<p>The performance baseline is defined using the PB: (Performance Baseline) tag and must be defined prior to performance neutral simulations which use the PN: (Performance-Neutral) tag.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim_batch</span><span class="o">.</span><span class="n">config_set</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">[</span><span class="s1">&#39;PKG:BL  + PB:1 + ENG:&#39;</span> <span class="n">GDI_ENGINE</span> <span class="s1">&#39; ... ]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:TDS + PN:1 + ENG:&#39;</span> <span class="n">TDS12_ENGINE</span> <span class="s1">&#39; ... &#39;</span> <span class="o">||</span> <span class="n">ES_PCT</span><span class="p">:[</span><span class="mi">75</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">125</span><span class="p">]</span><span class="s1">&#39;]</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>The above example is abbreviated but demonstrates several points.</p>
<ul class="simple">
<li><p>The use of the PKG: tag to define a quick reference name for each case – BL for the baseline and TDS for the turbo-downsized case</p></li>
<li><p>The baseline is defined prior to the performance neutral case</p></li>
<li><p>The performance neutral case sweeps engine size using the ES_PCT: tag, although it is possible to use other tags</p></li>
<li><p>The ES_PCT: tag is on the right hand side of the ‘||’ separator</p></li>
<li><p>The engine names are stored as strings in two workspace variables, GDI_ENGINE and TDS12_ENGINE which keep the config set concise and improve readability</p></li>
</ul>
<p>The ES in the ES_PCT: tag refers to Engine Scaling, in this case by  percent.  The unique thing about this tag is that ES_PCT:100 would be relative to an engine scaled approximately for performance neutrality, rather than an absolute scale.  The REVS_preprocess_sim_case script takes an initial guess at performance neutral engine sizing based on the engine’s rated power and torque and the transmission and axle ratios and tire size, roadload improvements, etc.  However, the approximation can’t compensate for differences in transmission efficiency or other factors that might affect vehicle performance like torque converter strategy or transmission shift times, hence the need to run a set of simulations, typically both smaller and larger than the nominal sizing.</p>
<p>Multiple baselines may be defined in a single batch, keeping in mind that each baseline precedes its performance neutral cases.</p>
<p>REVS_postprocess_sim_batch, the default sim batch post-processing script, implements one possible method for picking out the “winning” performance neutral result from among a set of simulations.  It finds the unique simulation cases and picks the case that meets or exceeds the baseline performance and has the lowest CO2 result.  Other strategies could be implemented as well, such as picking the smallest engine that meets performance, regardless of CO2.</p>
<p>The default performance criteria is the total performance time, defined as the sum of zero-to-sixty time, thirty-to-fifty time, fifty-to-seventy time and quarter mile time.</p>
<p>A relatively small performance neutral batch may be run on a single machine, simply running the batch as usual and using the default post processing.  For larger batches, we use a multi-pass and parallel simulation approach.  The multi-pass methodology starts with an initial coarse sizing (typically something like 75% / 100% / 125%) then runs one or two more batches with successively narrower and finer scaling increments until the desired level of scaling and performance accuracy has been met.  The multi-pass method can also be applied without the parallel processing as long as appropriate script changes are made.</p>
<style> .red {color:#dd0000; font-weight:bold; font-size:16px} </style><p><span class="red">These functions are not in the REVS_Common… maybe they should be?</span></p>
</div>
<div class="section" id="running-a-batch-with-various-engines">
<h2>3.2. Running a Batch with Various Engines<a class="headerlink" href="#running-a-batch-with-various-engines" title="Permalink to this headline">¶</a></h2>
<p>The typical method of running several engines is simply to define the engine names as strings in the workspace then set up simulation cases for each one.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GDI_ENGINE</span>             <span class="o">=</span> <span class="s1">&#39;ENG:engine_2013_Chevrolet_Ecotec_LCV_2L5_Reg_E10&#39;</span><span class="p">;</span>
<span class="n">TDS12_ENGINE</span>           <span class="o">=</span> <span class="s1">&#39;ENG:engine_2016_Honda_L15B7_1L5_Tier2&#39;</span><span class="p">;</span>
<span class="n">TDS12_ENGINE2</span>          <span class="o">=</span> <span class="s1">&#39;ENG:engine_2016_Honda_Turbo_1L5_paper_image&#39;</span><span class="p">;</span>
<span class="n">TDS21_ENGINE</span>           <span class="o">=</span> <span class="s1">&#39;ENG:engine_future_Ricardo_EGRB_1L0_Tier2&#39;</span><span class="p">;</span>
<span class="n">TDS11_ENGINE</span>           <span class="o">=</span> <span class="s1">&#39;ENG:engine_2015_Ford_EcoBoost_2L7_Tier2&#39;</span><span class="p">;</span>
<span class="n">TDS11_ENGINE2</span>          <span class="o">=</span> <span class="s1">&#39;ENG:engine_2013_Ford_EcoBoost_1L6_Tier2&#39;</span><span class="p">;</span>
<span class="n">ATK2p0_ENGINE</span>          <span class="o">=</span> <span class="s1">&#39;ENG:engine_2014_Mazda_Skyactiv_2L0_Tier2&#39;</span><span class="p">;</span>
<span class="n">ATK2p0_CEGR_ENGINE</span>     <span class="o">=</span> <span class="s1">&#39;ENG:engine_future_atkinson_CEGR_2L0_tier2&#39;</span><span class="p">;</span>
<span class="n">TNGA_ENGINE</span>            <span class="o">=</span> <span class="s1">&#39;ES_CYL:6 + ENG:engine_2016_toyota_TNGA_2L5_paper_image&#39;</span><span class="p">;</span>
<span class="n">ATK2p5_ENGINE</span>          <span class="o">=</span> <span class="s1">&#39;ENG:engine_2016_Mazda_Skyactiv_Turbo_2L5_Tier2&#39;</span><span class="p">;</span>
<span class="n">ATK2p0_X_ENGINE</span>        <span class="o">=</span> <span class="s1">&#39;ENG:engine_future_Mazda_Skyactiv_X_2L0_paper_image&#39;</span><span class="p">;</span>

<span class="n">sim_batch</span><span class="o">.</span><span class="n">config_set</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1a + &#39;</span> <span class="n">base_config</span> <span class="n">TDS11_ENGINE2</span>      <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1b + &#39;</span> <span class="n">base_config</span> <span class="n">TDS11_ENGINE</span>       <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1c + &#39;</span> <span class="n">base_config</span> <span class="n">TDS12_ENGINE2</span>      <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1d + &#39;</span> <span class="n">base_config</span> <span class="n">TDS12_ENGINE</span>       <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1e + &#39;</span> <span class="n">base_config</span> <span class="n">TDS21_ENGINE</span>       <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1f + &#39;</span> <span class="n">base_config</span> <span class="n">ATK2p0_ENGINE</span>      <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1g + &#39;</span> <span class="n">base_config</span> <span class="n">TNGA_ENGINE</span>        <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1h + &#39;</span> <span class="n">base_config</span> <span class="n">ATK2p5_ENGINE</span>      <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1i + &#39;</span> <span class="n">base_config</span> <span class="n">ATK2p0_X_ENGINE</span>    <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;PKG:1j + &#39;</span> <span class="n">base_config</span> <span class="n">ATK2p0_CEGR_ENGINE</span> <span class="o">...</span><span class="p">]</span>
<span class="o">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In this abbreviated example, base_config refers to a workspace variable that holds a string of the config tags that all the cases have in common, for example roadload settings, drive cycle selection, fuel type, etc.  Grouping the common settings into a single variable makes it easier to change the setup and improves readability.  Matlab string concatenation does the rest (the use of brackets, [ ], tells Matlab to combine all the separate strings into one).   Another advantage of using workspace variables to hold engine definition strings is illustrated in the TNGA_ENGINE workspace variable – it not only defines the engine but also uses the ES_CYL: tag to  tell the simulation to run it as a six-cylinder regardless of any engine resizing that may take place, such as during performance neutral sizing.  Breaking a config string down into smaller substrings and workspace variables is a good technique for managing complexity in larger batches.</p>
</div>
<div class="section" id="generating-alpha-roadload-abcs">
<h2>3.3. Generating ALPHA Roadload ABCs<a class="headerlink" href="#generating-alpha-roadload-abcs" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="drive-cycles">
<h2>3.4. Drive Cycles<a class="headerlink" href="#drive-cycles" title="Permalink to this headline">¶</a></h2>
<div class="section" id="turnkey-drive-cycles">
<h3>3.4.1. Turnkey Drive Cycles<a class="headerlink" href="#turnkey-drive-cycles" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="making-custom-drive-cycles">
<h3>3.4.2. Making Custom Drive Cycles<a class="headerlink" href="#making-custom-drive-cycles" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">2. Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Common Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-a-performance-neutral-batch">3.1. Running a Performance Neutral Batch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-batch-with-various-engines">3.2. Running a Batch with Various Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generating-alpha-roadload-abcs">3.3. Generating ALPHA Roadload ABCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#drive-cycles">3.4. Drive Cycles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#turnkey-drive-cycles">3.4.1. Turnkey Drive Cycles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#making-custom-drive-cycles">3.4.2. Making Custom Drive Cycles</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="model_inputs.html">4. Model Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_outputs.html">5. Model Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="alpha_development.html">6. ALPHA Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact_information.html">7. Contact Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="company_information.html">8. Company Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation_style_guide.html">9. Documentation Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html">10. Documentation From Code</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/common_use_cases.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model_inputs.html" title="4. Model Inputs"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="2. Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ALPHA Documentation 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, EPA.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>